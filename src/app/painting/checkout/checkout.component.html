<div class="checkout">
  <!-- Left Section -->
  <div class="checkout-form">
    <!-- Step 1: Email -->
    <form [formGroup]="emailForm" (ngSubmit)="continueWithEmail()">
      <h2>Your Email</h2>
      <input type="email" formControlName="email" placeholder="Email address" [readonly]="step === 2" />
      <div class="error" *ngIf="emailForm.get('email')?.invalid && emailForm.get('email')?.touched">
        <small
          *ngIf="emailForm.get('email')?.errors?.['required'] && emailForm.get('email')?.errors?.['whitespace']">Email
          is required.</small>
        <small *ngIf="emailForm.get('email')?.errors?.['pattern']">Enter a valid email address.</small>
      </div>
      <button type="submit" [disabled]="step === 2 || emailForm.invalid">
        Continue
      </button>
    </form>

    <!-- Step 2: Address -->
    <form *ngIf="step === 2" [formGroup]="addressForm" (ngSubmit)="placeOrder()">
      <h2>Shipping Address</h2>
      <div class="row">
        <input type="text" formControlName="firstName" placeholder="First Name" />
        <div class="error" *ngIf="addressForm.get('firstName')?.invalid && addressForm.get('firstName')?.touched">
          <small
            *ngIf="addressForm.get('firstName')?.errors?.['required'] || addressForm.get('firstName')?.errors?.['whitespace']">
            First name is required.
          </small>
        </div>
        <input type="text" formControlName="lastName" placeholder="Last Name" />
        <div class="error" *ngIf="addressForm.get('lastName')?.invalid && addressForm.get('lastName')?.touched">
          <small
            *ngIf="addressForm.get('lastName')?.errors?.['required'] || addressForm.get('lastName')?.errors?.['whitespace']">
            Last name is required.
          </small>
        </div>
      </div>
      <input type="text" formControlName="address1" placeholder="Address 1" />
      <div class="error" *ngIf="addressForm.get('address1')?.invalid && addressForm.get('address1')?.touched">
        <small
          *ngIf="addressForm.get('address1')?.errors?.['required'] || addressForm.get('address1')?.errors?.['whitespace']">
          Address 1 is required.
        </small>
      </div>
      <input type="text" formControlName="address2" placeholder="Address 2" />
      <div class="row">
        <input type="text" formControlName="country" placeholder="Country" />
        <div class="error" *ngIf="addressForm.get('country')?.invalid && addressForm.get('country')?.touched">
          <small *ngIf="addressForm.get('country')?.errors?.['required'] || addressForm.get('country')?.errors?.['whitespace']">
            Country is required.
          </small>
        </div>
        <input type="text" formControlName="zip" placeholder="Zip Code" />
        <div class="error" *ngIf="addressForm.get('zip')?.invalid && addressForm.get('zip')?.touched">
          <small *ngIf="addressForm.get('zip')?.errors?.['required'] || addressForm.get('zip')?.errors?.['whitespace']">
            Zipcode is required.
          </small>
        </div>
      </div>
      <div class="row">
        <input type="text" formControlName="state" placeholder="State" />
        <div class="error" *ngIf="addressForm.get('state')?.invalid && addressForm.get('state')?.touched">
          <small
            *ngIf="addressForm.get('state')?.errors?.['required'] || addressForm.get('state')?.errors?.['whitespace']">
            State is required.
          </small>
        </div>
        <input type="text" formControlName="city" placeholder="City" />
        <div class="error" *ngIf="addressForm.get('city')?.invalid && addressForm.get('city')?.touched">
          <small
            *ngIf="addressForm.get('city')?.errors?.['required'] || addressForm.get('city')?.errors?.['whitespace']">
            City is required.
          </small>
        </div>
      </div>
      <div class="row phone-row">
        <select formControlName="countryCode" class="country-code">
          <option *ngFor="let country of countryCodes" [value]="country.dial_code">
          {{country.flag}} ({{ country.dial_code }})
        </option>
        </select>
        <input type="tel" formControlName="phone" placeholder="Phone Number" />
      </div>
      <div *ngIf="addressForm.get('phone')?.touched && addressForm.get('phone')?.invalid" class="error">
        <small *ngIf="addressForm.get('phone')?.errors?.['required']">
          Phone number is required
        </small>
        <small *ngIf="addressForm.get('phone')?.errors?.['pattern']">
          Enter a valid phone number
        </small>
      </div>
      <button type="submit" [disabled]="addressForm.invalid">Continue to Payment</button>
    </form>
  </div>

  <!-- Right Section: Order Summary -->
  <div class="checkout-summary">
    <h3>Order Summary</h3>

    <!-- Product row -->
    <div class="summary-item">
      <img [src]="product.Image" alt="product" />
      <div class="product-details">
        <p class="title">{{ product.Title }}</p>
      </div>
    </div>

    <!-- Totals -->
    <div class="summary-totals">
      <div class="row total">
        <span>Total</span>
        <span>â‚¹{{ product.Price }}</span>
      </div>
    </div>
  </div>